{"version":3,"file":"index.modern.js","sources":["../src/providers/pagination-provider.js","../src/services/styles.js","../src/components/pbutton.js","../src/services/fetch-page.js","../src/components/pagination.js","../src/services/filter-props.js","../src/index.js"],"sourcesContent":["import React from 'react'\n\nexport const defaultData = {\n  current: null, //*\n  defaultCurrent: 1, //*\n  defaultPage: 1, //*\n  defaultPageSize: 10, //*\n  disabled: false, //*\n  hideOnSinglePage: false, //*\n  itemRender: () => null, //*\n  pageSize: null, //*\n  pageNeighbours: 0, //* indicates the number of additional page numbers to show on each side of the current page.\n  pageSizeOptions: [10, 20, 50, 100], //*\n  paginationProps: null, //*\n  responsive: false, //*\n  showQuickJumper: false, //*\n  showSizeChanger: null, //*\n  showTotal: () => '', //*\n  simple: null, //*\n  total: 0, //*\n  onChange: () => '', //*\n  onShowSizeChange: () => '', //*\n  size: 'md', //*\n  rounded: 'md', //*\n  baseStyles: null, //*\n  activeStyles: null, //*\n  hoverStyles: null, //*\n  colorScheme: 'brand' //*\n}\nconst PaginationContext = React.createContext({\n  ...defaultData\n})\n\nexport default PaginationContext\n","import React from 'react'\n\nimport { useColorModeValue } from '@chakra-ui/react'\nimport PagContext from '../providers/pagination-provider'\n\nexport const usePaginationStyles = (props) => {\n  const {\n    colorScheme,\n    rounded,\n    size,\n    baseStyles,\n    activeStyles,\n    hoverStyles\n  } = React.useContext(PagContext)\n\n  const activeStyle = activeStyles || {\n    bg: useColorModeValue(`${colorScheme}.600`, `${colorScheme}.500`),\n    color: useColorModeValue('white', 'gray.200'),\n    cursor: 'pointer'\n  }\n\n  const hoverStyle = !props.disabled && {\n    _hover: hoverStyles || activeStyle\n  }\n  const baseStyle = baseStyles || {\n    rounded: rounded,\n    bg: useColorModeValue('white', 'gray.800'),\n    color: useColorModeValue('gray.700', 'gray.200'),\n    userSelect: 'none'\n  }\n  const getSizeStyle = (size) => {\n    var styles\n    switch (size) {\n      case 'xs':\n        styles = { px: 2, fontSize: 'xs' }\n        break\n\n      case 'sm':\n        styles = { px: 3, py: 1, fontSize: 'sm' }\n        break\n\n      case 'md':\n        styles = { px: 4, py: 1, fontSize: 'md' }\n        break\n\n      case 'lg':\n        styles = { px: 5, py: 2, fontSize: 'lg' }\n        break\n\n      default:\n        break\n    }\n    return styles\n  }\n  const sizeStyle = getSizeStyle(size)\n  const disabledStyle = {\n    opacity: 0.6,\n    cursor: 'not-allowed'\n  }\n  return {\n    ...sizeStyle,\n    ...baseStyle,\n    ...hoverStyle,\n    ...(props.active && activeStyle),\n    ...(props.disabled && disabledStyle)\n  }\n}\n","import React from 'react'\n\nimport { Button } from '@chakra-ui/react'\nimport { usePaginationStyles } from '../services/styles'\nimport PagContext from '../providers/pagination-provider'\n\nconst handleResponsive = (props) => {\n  const { type, active, responsive } = props\n  let show = true\n  switch (type) {\n    case 'page':\n      if (!active) show = false\n      else if (!responsive.activePage) show = false\n      break\n\n    default:\n      break\n  }\n  return !show && 'none'\n}\nexport const PagButton = (props) => {\n  const { responsive } = React.useContext(PagContext)\n  const paginationStyles = usePaginationStyles(props)\n  const display = responsive && handleResponsive({ ...props, responsive })\n  return (\n    <Button\n      onClick={!props.disabled ? props.onClick : null}\n      as={props.as}\n      mx={1}\n      my='auto'\n      {...paginationStyles}\n      _focus={{ boxShadow: 'none' }}\n      size={props.size}\n      display={{ base: display, sm: 'block' }}\n    >\n      {props.children}\n    </Button>\n  )\n}\n","import React from 'react'\nimport PagContext from '../providers/pagination-provider'\n\nconst LEFT_PAGE = 'LEFT'\n\nconst RIGHT_PAGE = 'RIGHT'\n\n/**\n * Helper method for creating a range of numbers\n * range(1, 5) => [1, 2, 3, 4, 5]\n */\nconst range = (from, to, step = 1) => {\n  let i = from\n  const range = []\n\n  while (i <= to) {\n    range.push(i)\n    i += step\n  }\n\n  return range\n}\n\nexport const fetchPageNumbers = () => {\n  const props = React.useContext(PagContext)\n  const totalPages = Math.ceil(props.total / props.pageSize)\n  const currentPage = props.currentPage\n  const pageNeighbours = props.pageNeighbours\n\n  /**\n   * totalNumbers: the total page numbers to show on the control\n   * totalBlocks: totalNumbers + 2 to cover for the left(<) and right(>) controls\n   */\n  const totalNumbers = pageNeighbours * 2 + 3\n  const totalBlocks = totalNumbers + 2\n\n  if (totalPages > totalBlocks) {\n    const startPage = Math.max(2, currentPage - pageNeighbours)\n    const endPage = Math.min(totalPages - 1, currentPage + pageNeighbours)\n    let pages = range(startPage, endPage)\n\n    /**\n     * hasLeftSpill: has hidden pages to the left\n     * hasRightSpill: has hidden pages to the right\n     * spillOffset: number of hidden pages either to the left or to the right\n     */\n    const hasLeftSpill = startPage > 2\n    const hasRightSpill = totalPages - endPage > 1\n    const spillOffset = totalNumbers - (pages.length + 1)\n\n    switch (true) {\n      // handle: (1) < {5 6} [7] {8 9} (10)\n      case hasLeftSpill && !hasRightSpill: {\n        const extraPages = range(startPage - spillOffset, startPage - 1)\n        pages = [LEFT_PAGE, ...extraPages, ...pages]\n        break\n      }\n\n      // handle: (1) {2 3} [4] {5 6} > (10)\n      case !hasLeftSpill && hasRightSpill: {\n        const extraPages = range(endPage + 1, endPage + spillOffset)\n        pages = [...pages, ...extraPages, RIGHT_PAGE]\n        break\n      }\n\n      // handle: (1) < {4 5} [6] {7 8} > (10)\n      case hasLeftSpill && hasRightSpill:\n      default: {\n        pages = [LEFT_PAGE, ...pages, RIGHT_PAGE]\n        break\n      }\n    }\n\n    return [1, ...pages, totalPages]\n  }\n\n  return range(1, totalPages)\n}\n","import React from 'react'\nimport { PagButton } from './pbutton'\nimport {\n  Menu,\n  MenuButton,\n  Button,\n  MenuList,\n  Box,\n  MenuOptionGroup,\n  MenuItemOption,\n  chakra,\n  Input,\n  HStack,\n  Text\n} from '@chakra-ui/react'\nimport PagContext from '../providers/pagination-provider'\nimport { fetchPageNumbers } from '../services/fetch-page'\n\nexport const PaginationComp = () => {\n  const props = React.useContext(PagContext)\n  const totalPages = Math.ceil(props.total / props.pageSize)\n\n  const prevRender = props.itemRender(props.currentPage, 'prev')\n  const nextRender = props.itemRender(props.currentPage, 'next')\n  const leftRender = props.itemRender(props.currentPage, 'backward')\n  const rightRender = props.itemRender(props.currentPage, 'forward')\n  const jumperRender = props.itemRender(props.currentPage, 'jumper')\n  const pageRender = props.itemRender(props.currentPage, 'page')\n  const allRender = props.itemRender(props.currentPage, 'all')\n  const totalRender = props.showTotal(props.total)\n\n  if (!totalPages || (props.hideOnSinglePage && totalPages === 1)) return null\n\n  const pages = fetchPageNumbers()\n\n  const changePage = (page) => {\n    const currentPage = Math.max(0, Math.min(page, totalPages))\n    props.setCurrentPage(currentPage)\n    props.onChange(currentPage, totalPages, props.pageSize, props.total)\n  }\n\n  const fastBackward = () => {\n    const page = props.currentPage - props.pageNeighbours * 2 - 1\n    changePage(page)\n  }\n\n  const fastForward = () => {\n    const page = props.currentPage + props.pageNeighbours * 2 + 1\n    changePage(page)\n  }\n\n  const backward = () => {\n    changePage(props.currentPage - 1)\n  }\n\n  const forward = () => {\n    changePage(props.currentPage + 1)\n  }\n\n  const changePageSize = (size) => {\n    props.setPageSize(size)\n    props.onShowSizeChange(props.currentPage, size)\n  }\n\n  const [simplePage, setSimplePage] = React.useState(props.currentPage)\n  const [pageJumper, setPageJumper] = React.useState('')\n\n  const simplePageUpdate = (e) => {\n    e.preventDefault()\n    if (isNaN(simplePage)) {\n      setSimplePage(props.currentPage)\n    } else {\n      props.setCurrentPage(Math.max(0, Math.min(simplePage, totalPages)))\n    }\n  }\n  const pageJumperUpdate = (e) => {\n    e.preventDefault()\n    if (isNaN(pageJumper)) {\n      setPageJumper('')\n    } else {\n      props.setCurrentPage(Math.max(0, Math.min(pageJumper, totalPages)))\n      setPageJumper('')\n    }\n  }\n  return (\n    props.total > 0 && (\n      <Box\n        {...(props.paginationProps || { w: 'full', justifyContent: 'center' })}\n      >\n        <chakra.span\n          mx={1}\n          my='auto'\n          fontSize={props.size}\n          display={\n            props.responsive && {\n              base: !props.responsive.totalRender && 'none',\n              sm: 'block'\n            }\n          }\n        >\n          {totalRender}\n        </chakra.span>\n        {props.simple ? (\n          <React.Fragment>\n            <form onSubmit={simplePageUpdate}>\n              <Input\n                textAlign='center'\n                isDisabled={props.disabled}\n                my='auto'\n                size={\n                  props.size === 'lg' ? 'md' : props.size === 'xs' ? 'xs' : 'sm'\n                }\n                w={props.size === 'lg' ? 50 : 10}\n                value={simplePage}\n                onChange={(e) => setSimplePage(e.target.value)}\n              />\n            </form>\n            <chakra.span\n              userSelect='none'\n              opacity={props.disabled ? 0.6 : 1}\n              mx={1}\n              my='auto'\n              fontSize={props.size}\n            >\n              / 5\n            </chakra.span>\n          </React.Fragment>\n        ) : (\n          <React.Fragment>\n            <PagButton\n              as={allRender || prevRender}\n              disabled={props.currentPage === 1 || props.disabled}\n              onClick={backward}\n              size={\n                props.size === 'lg' ? 'md' : props.size === 'xs' ? 'xs' : 'sm'\n              }\n            >\n              {!prevRender && '<'}\n            </PagButton>\n\n            {pages.map((page, index) => {\n              if (page === 'LEFT')\n                return (\n                  <Button\n                    as={allRender || rightRender}\n                    key={index}\n                    onClick={fastBackward}\n                    size={\n                      props.size === 'lg'\n                        ? 'md'\n                        : props.size === 'xs'\n                        ? 'xs'\n                        : 'sm'\n                    }\n                    display={\n                      props.responsive && {\n                        base: !props.responsive.fastBackward && 'none',\n                        sm: 'block'\n                      }\n                    }\n                    my='auto'\n                  >\n                    {!leftRender && '<<'}\n                  </Button>\n                )\n\n              if (page === 'RIGHT')\n                return (\n                  <Button\n                    as={allRender || rightRender}\n                    key={index}\n                    onClick={fastForward}\n                    size={\n                      props.size === 'lg'\n                        ? 'md'\n                        : props.size === 'xs'\n                        ? 'xs'\n                        : 'sm'\n                    }\n                    display={\n                      props.responsive && {\n                        base: !props.responsive.fastForward && 'none',\n                        sm: 'block'\n                      }\n                    }\n                    my='auto'\n                  >\n                    {!rightRender && '>>'}\n                  </Button>\n                )\n              const active = page === props.currentPage\n              return (\n                <PagButton\n                  as={allRender || pageRender}\n                  disabled={props.disabled}\n                  active={active}\n                  key={`page-${index}`}\n                  onClick={() => changePage(page)}\n                  size={\n                    props.size === 'lg'\n                      ? 'md'\n                      : props.size === 'xs'\n                      ? 'xs'\n                      : 'sm'\n                  }\n                  type='page'\n                >\n                  {page}\n                </PagButton>\n              )\n            })}\n            <PagButton\n              as={allRender || nextRender}\n              disabled={props.currentPage === totalPages || props.disabled}\n              onClick={forward}\n              size={\n                props.size === 'lg' ? 'md' : props.size === 'xs' ? 'xs' : 'sm'\n              }\n            >\n              {!nextRender && '>'}\n            </PagButton>\n          </React.Fragment>\n        )}\n        {props.showSizeChanger && (\n          <Menu>\n            <MenuButton\n              display={\n                props.responsive && {\n                  base: !props.responsive.pageSize && 'none',\n                  sm: 'block'\n                }\n              }\n            >\n              <PagButton\n                mx={1}\n                as={allRender || jumperRender || Button}\n                disabled={props.disabled}\n                size={\n                  props.size === 'lg' ? 'md' : props.size === 'xs' ? 'xs' : 'sm'\n                }\n              >\n                {props.pageSize} / page\n              </PagButton>\n            </MenuButton>\n            <MenuList>\n              <MenuOptionGroup onChange={changePageSize}>\n                {props.pageSizeOptions\n                  .filter((opt) => opt !== props.pageSize)\n                  .map((opt, oid) => (\n                    <MenuItemOption\n                      fontSize={props.size}\n                      value={opt.toString()}\n                      key={`size${oid}`}\n                    >\n                      {opt} / page\n                    </MenuItemOption>\n                  ))}\n              </MenuOptionGroup>\n            </MenuList>\n          </Menu>\n        )}\n        {props.showQuickJumper && (\n          <HStack\n            as='form'\n            userSelect='none'\n            opacity={props.disabled ? 0.6 : 1}\n            onSubmit={pageJumperUpdate}\n            display={\n              props.responsive && {\n                base: !props.responsive.pageJumper && 'none',\n                sm: 'flex'\n              }\n            }\n          >\n            <Text wordBreak='unset'>Go to:</Text>\n            <Input\n              width='50px'\n              value={pageJumper}\n              isDisabled={props.disabled}\n              onChange={(e) => setPageJumper(e.target.value)}\n              size={\n                props.size === 'lg' ? 'md' : props.size === 'xs' ? 'xs' : 'sm'\n              }\n            />\n          </HStack>\n        )}\n      </Box>\n    )\n  )\n}\n","import React from 'react'\nimport { defaultData } from '../providers/pagination-provider'\n\nconst methods = ['itemRender', 'setCurrentPage']\nconst nonMethods = Object.keys(defaultData).filter((k) => !methods.includes(k))\n\nexport const filterProps = (props) => {\n  const validProps = nonMethods.reduce((acc, nxt) => {\n    acc.push(props[nxt])\n    return acc\n  }, [])\n  return React.useMemo(() => props, validProps)\n}\n","import React from 'react'\n\nimport PagContext from './providers/pagination-provider'\nimport { PaginationComp } from './components/pagination'\n\nimport { filterProps } from './services/filter-props'\n\nconst Pagination = (props) => {\n  const defaultProps = React.useContext(PagContext)\n  const allProps = { ...defaultProps, ...props }\n  const [currentPage, setCurrentPage] = React.useState(\n    allProps.current || allProps.defaultCurrent\n  )\n  React.useEffect(() => {\n    props.current && setCurrentPage(props.current)\n  }, [props.current])\n  const [pageSize, setPageSize] = React.useState(\n    allProps.pageSize || allProps.defaultPageSize\n  )\n  const contextvalue = { ...allProps }\n  const value = React.useMemo(() => {\n    return {\n      ...contextvalue,\n      currentPage,\n      setCurrentPage,\n      pageSize,\n      setPageSize\n    }\n  }, [filterProps(contextvalue), currentPage, pageSize])\n  return (\n    <PagContext.Provider value={value}>\n      <PaginationComp />\n    </PagContext.Provider>\n  )\n}\n\nexport default Pagination\n"],"names":["defaultData","current","defaultCurrent","defaultPage","defaultPageSize","disabled","hideOnSinglePage","itemRender","pageSize","pageNeighbours","pageSizeOptions","paginationProps","responsive","showQuickJumper","showSizeChanger","showTotal","simple","total","onChange","onShowSizeChange","size","rounded","baseStyles","activeStyles","hoverStyles","colorScheme","PaginationContext","React","createContext","usePaginationStyles","props","useContext","PagContext","activeStyle","bg","useColorModeValue","color","cursor","hoverStyle","_hover","baseStyle","userSelect","getSizeStyle","styles","px","fontSize","py","sizeStyle","disabledStyle","opacity","active","handleResponsive","type","show","activePage","PagButton","paginationStyles","display","onClick","as","boxShadow","base","sm","children","LEFT_PAGE","RIGHT_PAGE","range","from","to","step","i","push","fetchPageNumbers","totalPages","Math","ceil","currentPage","totalNumbers","totalBlocks","startPage","max","endPage","min","pages","hasLeftSpill","hasRightSpill","spillOffset","length","extraPages","PaginationComp","prevRender","nextRender","leftRender","rightRender","jumperRender","pageRender","allRender","totalRender","changePage","page","setCurrentPage","fastBackward","fastForward","backward","forward","changePageSize","setPageSize","useState","simplePage","setSimplePage","pageJumper","setPageJumper","simplePageUpdate","e","preventDefault","isNaN","pageJumperUpdate","w","justifyContent","target","value","map","index","Button","filter","opt","oid","toString","methods","nonMethods","Object","keys","k","includes","filterProps","validProps","reduce","acc","nxt","useMemo","Pagination","defaultProps","allProps","useEffect","contextvalue"],"mappings":"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"}